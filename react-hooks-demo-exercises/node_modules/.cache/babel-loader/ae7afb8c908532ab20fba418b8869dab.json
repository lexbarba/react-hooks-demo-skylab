{"ast":null,"code":"import _slicedToArray from \"/Users/alexbarba/bootcamp/react-hooks-demo/marvel-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/alexbarba/bootcamp/react-hooks-demo/marvel-app/src/components/CharacterInfoResult/index.js\";\nimport React, { useState, useEffect } from \"react\";\nimport logic from \"../Logic\";\nimport PaintCharacter from \"../PaintCharacter\";\nexport default function CharacterInfoResult(_ref) {\n  var id = _ref.id,\n      onComicSelected = _ref.onComicSelected,\n      moreInfo = _ref.moreInfo,\n      seeComics = _ref.seeComics,\n      comics = _ref.comics;\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      character = _useState2[0],\n      setCharacter = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      feedback = _useState4[0],\n      setFeedback = _useState4[1];\n\n  var _useState5 = useState(null),\n      _useState6 = _slicedToArray(_useState5, 2),\n      isFav = _useState6[0],\n      setIsFav = _useState6[1];\n\n  useEffect(function () {\n    handleCharacterSelected(id);\n  }, [id]);\n\n  var handleCharacterSelected = function handleCharacterSelected(id) {\n    debugger;\n\n    try {\n      logic.retrieveCharacter(id).then(function (character) {\n        setCharacter(character.results[0]);\n        setFeedback(null);\n      }).then(function () {\n        return logic.retrieveFavourites().then(function (favs) {\n          debugger;\n          var result = favs.some(function (obj) {\n            return obj.id === character.id;\n          });\n          setIsFav(!!result);\n        });\n      }).catch(function (_ref2) {\n        var message = _ref2.message;\n        debugger;\n        setCharacter(null);\n        setFeedback(message);\n      });\n    } catch (_ref3) {\n      var message = _ref3.message;\n      debugger;\n      setCharacter(null);\n      debugger;\n      setFeedback(message);\n    }\n  };\n\n  var handleFavourite = function handleFavourite(data) {\n    try {\n      logic.updateFavourites(data).then(function (favs) {\n        var result = favs.some(function (obj) {\n          return obj.id === character.id;\n        });\n        if (result) setIsFav(true);else setIsFav(false);\n      });\n    } catch (_ref4) {\n      var message = _ref4.message;\n      setCharacter(null);\n      setFeedback(message);\n    }\n  };\n\n  return React.createElement(PaintCharacter, {\n    results: character,\n    feedback: feedback,\n    onItemClick: onComicSelected,\n    handleFavourite: handleFavourite,\n    isFav: isFav,\n    seeComics: seeComics,\n    moreInfo: moreInfo,\n    comics: comics,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  });\n}","map":{"version":3,"sources":["/Users/alexbarba/bootcamp/react-hooks-demo/marvel-app/src/components/CharacterInfoResult/index.js"],"names":["React","useState","useEffect","logic","PaintCharacter","CharacterInfoResult","id","onComicSelected","moreInfo","seeComics","comics","character","setCharacter","feedback","setFeedback","isFav","setIsFav","handleCharacterSelected","retrieveCharacter","then","results","retrieveFavourites","favs","result","some","obj","catch","message","handleFavourite","data","updateFavourites"],"mappings":";;AAAA,OAAOA,KAAP,IAAeC,QAAf,EAAyBC,SAAzB,QAAyC,OAAzC;AACA,OAAOC,KAAP,MAAkB,UAAlB;AACA,OAAOC,cAAP,MAA2B,mBAA3B;AAEA,eAAe,SAASC,mBAAT,OAAoF;AAAA,MAApDC,EAAoD,QAApDA,EAAoD;AAAA,MAAhDC,eAAgD,QAAhDA,eAAgD;AAAA,MAA/BC,QAA+B,QAA/BA,QAA+B;AAAA,MAArBC,SAAqB,QAArBA,SAAqB;AAAA,MAAVC,MAAU,QAAVA,MAAU;;AAAA,kBAE7DT,QAAQ,CAAC,IAAD,CAFqD;AAAA;AAAA,MAExFU,SAFwF;AAAA,MAE7EC,YAF6E;;AAAA,mBAG/DX,QAAQ,CAAC,IAAD,CAHuD;AAAA;AAAA,MAGxFY,QAHwF;AAAA,MAG9EC,WAH8E;;AAAA,mBAIrEb,QAAQ,CAAC,IAAD,CAJ6D;AAAA;AAAA,MAIxFc,KAJwF;AAAA,MAIjFC,QAJiF;;AAM/Fd,EAAAA,SAAS,CAAC,YAAI;AACVe,IAAAA,uBAAuB,CAACX,EAAD,CAAvB;AACH,GAFQ,EAEP,CAACA,EAAD,CAFO,CAAT;;AAIA,MAAMW,uBAAuB,GAAG,SAA1BA,uBAA0B,CAAAX,EAAE,EAAI;AAClC;;AACA,QAAI;AACJH,MAAAA,KAAK,CAACe,iBAAN,CAAwBZ,EAAxB,EACKa,IADL,CACU,UAAAR,SAAS,EAAI;AACfC,QAAAA,YAAY,CAACD,SAAS,CAACS,OAAV,CAAkB,CAAlB,CAAD,CAAZ;AACAN,QAAAA,WAAW,CAAC,IAAD,CAAX;AAAmB,OAH3B,EAIKK,IAJL,CAIU,YAAM;AACZ,eAAOhB,KAAK,CAACkB,kBAAN,GACFF,IADE,CACG,UAAAG,IAAI,EAAI;AACV;AACA,cAAIC,MAAM,GAAGD,IAAI,CAACE,IAAL,CAAW,UAAAC,GAAG;AAAA,mBAAIA,GAAG,CAACnB,EAAJ,KAAWK,SAAS,CAACL,EAAzB;AAAA,WAAd,CAAb;AACAU,UAAAA,QAAQ,CAAC,CAAC,CAACO,MAAH,CAAR;AACH,SALE,CAAP;AAMC,OAXL,EAYKG,KAZL,CAYW,iBAAiB;AAAA,YAAdC,OAAc,SAAdA,OAAc;AACpB;AACAf,QAAAA,YAAY,CAAC,IAAD,CAAZ;AACAE,QAAAA,WAAW,CAACa,OAAD,CAAX;AAAqB,OAf7B;AAgBC,KAjBD,CAiBE,cAAoB;AAAA,UAAXA,OAAW,SAAXA,OAAW;AAClB;AACAf,MAAAA,YAAY,CAAC,IAAD,CAAZ;AACA;AACAE,MAAAA,WAAW,CAACa,OAAD,CAAX;AACH;AACJ,GAzBD;;AA2BA,MAAMC,eAAe,GAAG,SAAlBA,eAAkB,CAAAC,IAAI,EAAI;AAC5B,QAAI;AACJ1B,MAAAA,KAAK,CAAC2B,gBAAN,CAAuBD,IAAvB,EACKV,IADL,CACU,UAAAG,IAAI,EAAI;AACV,YAAIC,MAAM,GAAGD,IAAI,CAACE,IAAL,CAAU,UAAAC,GAAG;AAAA,iBAAIA,GAAG,CAACnB,EAAJ,KAAWK,SAAS,CAACL,EAAzB;AAAA,SAAb,CAAb;AACA,YAAIiB,MAAJ,EAAYP,QAAQ,CAAC,IAAD,CAAR,CAAZ,KACKA,QAAQ,CAAC,KAAD,CAAR;AACR,OALL;AAMC,KAPD,CAOE,cAAoB;AAAA,UAAXW,OAAW,SAAXA,OAAW;AAClBf,MAAAA,YAAY,CAAC,IAAD,CAAZ;AACAE,MAAAA,WAAW,CAACa,OAAD,CAAX;AACH;AACJ,GAZD;;AAcA,SACE,oBAAC,cAAD;AAAgB,IAAA,OAAO,EAAEhB,SAAzB;AAAoC,IAAA,QAAQ,EAAEE,QAA9C;AAAwD,IAAA,WAAW,EAAEN,eAArE;AAAsF,IAAA,eAAe,EAAEqB,eAAvG;AAAwH,IAAA,KAAK,EAAEb,KAA/H;AAAsI,IAAA,SAAS,EAAEN,SAAjJ;AAA4J,IAAA,QAAQ,EAAED,QAAtK;AAAgL,IAAA,MAAM,EAAEE,MAAxL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF;AAGH","sourcesContent":["import React, {useState, useEffect} from \"react\"\nimport logic from \"../Logic\"\nimport PaintCharacter from \"../PaintCharacter\"\n\nexport default function CharacterInfoResult ( {id, onComicSelected, moreInfo, seeComics, comics} ) {\n\n    const [character, setCharacter] = useState(null)\n    const [feedback, setFeedback] = useState(null)\n    const [isFav, setIsFav] = useState(null)\n\n    useEffect(()=>{\n        handleCharacterSelected(id)\n    },[id])\n\n    const handleCharacterSelected = id => {\n        debugger\n        try {\n        logic.retrieveCharacter(id)\n            .then(character => {\n                setCharacter(character.results[0]);\n                setFeedback(null) })\n            .then(() => {\n            return logic.retrieveFavourites()\n                .then(favs => {\n                    debugger\n                    let result = favs.some( obj => obj.id === character.id)\n                    setIsFav(!!result)\n                })\n            })\n            .catch(({ message }) => {\n                debugger;\n                setCharacter(null);\n                setFeedback(message)})\n        } catch ({ message }) {\n            debugger\n            setCharacter(null);\n            debugger \n            setFeedback(message) \n        }\n    }\n\n    const handleFavourite = data => {\n        try {\n        logic.updateFavourites(data)\n            .then(favs => {\n                let result = favs.some(obj => obj.id === character.id)\n                if (result) setIsFav(true)\n                else setIsFav(false)\n            })\n        } catch ({ message }) {\n            setCharacter(null)\n            setFeedback(message)\n        }\n    }\n\n    return (\n      <PaintCharacter results={character} feedback={feedback} onItemClick={onComicSelected} handleFavourite={handleFavourite} isFav={isFav} seeComics={seeComics} moreInfo={moreInfo} comics={comics}/>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}