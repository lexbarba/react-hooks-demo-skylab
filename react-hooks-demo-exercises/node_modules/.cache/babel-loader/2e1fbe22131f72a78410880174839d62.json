{"ast":null,"code":"import _classCallCheck from \"/Users/alexbarba/bootcamp/react-hooks-demo/marvel-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/alexbarba/bootcamp/react-hooks-demo/marvel-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/alexbarba/bootcamp/react-hooks-demo/marvel-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/alexbarba/bootcamp/react-hooks-demo/marvel-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/alexbarba/bootcamp/react-hooks-demo/marvel-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/alexbarba/bootcamp/react-hooks-demo/marvel-app/src/components/CharacterInfoResult/index.js\";\nimport React, { Component } from \"react\";\nimport logic from \"../Logic\";\nimport PaintCharacter from \"../PaintCharacter\";\n\nvar CharacterInfoResult =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(CharacterInfoResult, _Component);\n\n  function CharacterInfoResult() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, CharacterInfoResult);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(CharacterInfoResult)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      character: null,\n      feedback: null,\n      isFav: null\n    };\n\n    _this.handleCharacterSelected = function (id) {\n      try {\n        logic.retrieveCharacter(id).then(function (character) {\n          _this.setState({\n            character: character.results[0],\n            feedback: null\n          });\n        }).then(function () {\n          debugger;\n          return logic.retrieveFavourites().then(function (favs) {\n            var result = favs.some(function (obj) {\n              return obj.id === _this.state.character.id;\n            });\n\n            if (result) {\n              _this.setState({\n                isFav: true\n              });\n            } else {\n              _this.setState({\n                isFav: false\n              });\n            }\n          });\n        }).catch(function (_ref) {\n          var message = _ref.message;\n          return _this.setState({\n            feedback: message,\n            character: null\n          });\n        });\n      } catch (_ref2) {\n        var message = _ref2.message;\n\n        _this.setState({\n          feedback: message,\n          character: null\n        });\n      }\n    };\n\n    _this.handleFavourite = function (data) {\n      try {\n        logic.updateFavourites(data).then(function (favs) {\n          var result = favs.some(function (obj) {\n            return obj.id === _this.state.character.id;\n          });\n\n          if (result) {\n            _this.setState({\n              isFav: true\n            });\n          } else {\n            _this.setState({\n              isFav: false\n            });\n          }\n        });\n      } catch (_ref3) {\n        var message = _ref3.message;\n\n        _this.setState({\n          feedback: message,\n          character: null\n        });\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(CharacterInfoResult, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var id = this.props.id;\n      this.handleCharacterSelected(id);\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      var id = nextProps.id;\n      this.handleCharacterSelected(id);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          character = _this$state.character,\n          feedback = _this$state.feedback,\n          isFav = _this$state.isFav,\n          _this$props = this.props,\n          onComicSelected = _this$props.onComicSelected,\n          moreInfo = _this$props.moreInfo,\n          seeComics = _this$props.seeComics,\n          comics = _this$props.comics;\n      return React.createElement(PaintCharacter, {\n        results: character,\n        feedback: feedback,\n        onItemClick: onComicSelected,\n        handleFavourite: this.handleFavourite,\n        isFav: isFav,\n        seeComics: seeComics,\n        moreInfo: moreInfo,\n        comics: comics,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      });\n    }\n  }]);\n\n  return CharacterInfoResult;\n}(Component);\n\nexport default CharacterInfoResult;","map":{"version":3,"sources":["/Users/alexbarba/bootcamp/react-hooks-demo/marvel-app/src/components/CharacterInfoResult/index.js"],"names":["React","Component","logic","PaintCharacter","CharacterInfoResult","state","character","feedback","isFav","handleCharacterSelected","id","retrieveCharacter","then","setState","results","retrieveFavourites","favs","result","some","obj","catch","message","handleFavourite","data","updateFavourites","props","nextProps","onComicSelected","moreInfo","seeComics","comics"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\"\nimport logic from \"../Logic\"\nimport PaintCharacter from \"../PaintCharacter\"\n\nclass CharacterInfoResult extends Component {\n  state = { character: null, feedback: null, isFav: null }\n\n  componentWillMount() {\n    const { props: { id } } = this\n    this.handleCharacterSelected(id)\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const { id } = nextProps\n    this.handleCharacterSelected(id)\n  }\n\n  handleCharacterSelected = id => {\n    try {\n      logic.retrieveCharacter(id)\n        .then(character => {this.setState({ character: character.results[0], feedback: null })})\n        .then(() => {\n          debugger\n          return logic.retrieveFavourites().then(favs => {\n            let result = favs.some( obj => obj.id === this.state.character.id)\n            if (result) {\n              this.setState({ isFav: true })\n            } else {\n              this.setState({ isFav: false })\n            }\n          })\n        })\n        .catch(({ message }) =>\n          this.setState({ feedback: message, character: null })\n        )\n    } catch ({ message }) {\n      this.setState({ feedback: message, character: null })\n    }\n  }\n\n  handleFavourite = data => {\n    try {\n      logic.updateFavourites(data).then(favs => {\n        let result = favs.some(obj => obj.id === this.state.character.id)\n        if (result) {\n          this.setState({ isFav: true })\n        } else {\n          this.setState({ isFav: false })\n        }\n      })\n    } catch ({ message }) {\n      this.setState({ feedback: message, character: null })\n    }\n  }\n\n  render() {\n    const {\n      state: { character, feedback, isFav }, props: { onComicSelected, moreInfo, seeComics, comics }} = this\n\n    return (\n      <PaintCharacter results={character} feedback={feedback} onItemClick={onComicSelected} handleFavourite={this.handleFavourite} isFav={isFav} seeComics={seeComics} moreInfo={moreInfo} comics={comics}/>\n    )\n  }\n}\n\nexport default CharacterInfoResult\n"]},"metadata":{},"sourceType":"module"}