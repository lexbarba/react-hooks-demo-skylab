{"ast":null,"code":"import _slicedToArray from \"/Users/alexbarba/bootcamp/react-hooks-demo/marvel-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/alexbarba/bootcamp/react-hooks-demo/marvel-app/src/components/Search/index.js\";\nimport React, { useState, useEffect, useContext } from 'react';\nimport CharacterInfoResult from '../CharacterInfoResult';\nimport SearchResults from '../SearchResults';\nimport { DemoContext } from '../DemoContext';\nimport logic from '../../Logic';\nexport default function Search() {\n  var _useContext = useContext(DemoContext),\n      email = _useContext.email;\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      query = _useState2[0],\n      setQuery = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      feedback = _useState4[0],\n      setFeedback = _useState4[1];\n\n  var _useState5 = useState(null),\n      _useState6 = _slicedToArray(_useState5, 2),\n      character = _useState6[0],\n      setCharacter = _useState6[1];\n\n  var _useState7 = useState(null),\n      _useState8 = _slicedToArray(_useState7, 2),\n      characters = _useState8[0],\n      setCharacters = _useState8[1];\n\n  var _useState9 = useState(null),\n      _useState10 = _slicedToArray(_useState9, 2),\n      searching = _useState10[0],\n      setSearching = _useState10[1];\n\n  useEffect(function () {\n    setQuery('avengers').then(function () {\n      return handleSearch();\n    });\n  }, []);\n\n  function handleSearch() {\n    try {\n      setSearching(true);\n      setCharacters(null);\n      setCharacter(null);\n      logic.searchCharacter(query).then(function (_ref) {\n        var results = _ref.results;\n        setSearching(null);\n        setFeedback(null);\n        setCharacters(results.map(function (_ref2) {\n          var id = _ref2.id,\n              name = _ref2.name,\n              _ref2$thumbnail = _ref2.thumbnail,\n              path = _ref2$thumbnail.path,\n              extension = _ref2$thumbnail.extension;\n          return {\n            id: id,\n            name: name,\n            path: path,\n            extension: extension\n          };\n        }));\n      }).catch(function (_ref3) {\n        var message = _ref3.message;\n        setFeedback(message);\n        setSearching(null);\n        setCharacters(null);\n      });\n    } catch (_ref4) {\n      var message = _ref4.message;\n      setFeedback(message);\n      setSearching(null);\n      setCharacters(null);\n    }\n  }\n\n  function handleCharacterSelected(id) {\n    try {\n      logic.retrieveCharacter(id).then(function (el) {\n        return setCharacter(el.results[0]);\n      }).catch(function (_ref5) {\n        var message = _ref5.message;\n        setCharacter(null);\n        setFeedback(message);\n      });\n    } catch (_ref6) {\n      var message = _ref6.message;\n      setCharacter(null);\n      setFeedback(message);\n    }\n  }\n\n  return React.createElement(\"section\", {\n    className: \"margin-top\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"columns is-mobile is-centered\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"column\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, React.createElement(\"form\", {\n    onSubmit: function onSubmit(e) {\n      e.preventDefault();\n      handleSearch();\n    },\n    className: \"field has-addons has-addons-centered\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"control has-icons-left is-expanded\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    onChange: function onChange(e) {\n      return setQuery(e.target.value);\n    },\n    className: \"input is-small is-rounded\",\n    placeholder: \"Look for your character!\",\n    type: \"text\",\n    name: \"query\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }), React.createElement(\"span\", {\n    className: \"icon is-small is-left\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }, React.createElement(\"i\", {\n    className: \"fas fa-bolt\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"control\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    className: \"button is-small is-rounded is-warning\",\n    type: \"submit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, \"Search\"))))), React.createElement(SearchResults, {\n    characters: characters,\n    searching: searching,\n    feedback: feedback,\n    onCharacterSelected: handleCharacterSelected,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }), React.createElement(CharacterInfoResult, {\n    character: character,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }));\n}","map":{"version":3,"sources":["/Users/alexbarba/bootcamp/react-hooks-demo/marvel-app/src/components/Search/index.js"],"names":["React","useState","useEffect","useContext","CharacterInfoResult","SearchResults","DemoContext","logic","Search","email","query","setQuery","feedback","setFeedback","character","setCharacter","characters","setCharacters","searching","setSearching","then","handleSearch","searchCharacter","results","map","id","name","thumbnail","path","extension","catch","message","handleCharacterSelected","retrieveCharacter","el","e","preventDefault","target","value"],"mappings":"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","sourcesContent":["import React, {useState, useEffect, useContext} from 'react'\nimport CharacterInfoResult from '../CharacterInfoResult'\nimport SearchResults from '../SearchResults'\nimport { DemoContext } from '../DemoContext'\nimport logic from '../../Logic'\n\n\nexport default function Search() {\n\n    const { email } = useContext(DemoContext)\n\n    const [query, setQuery] = useState(null)\n    const [feedback, setFeedback] = useState(null)\n    const [character, setCharacter] = useState(null)\n    const [characters, setCharacters] = useState(null)\n    const [searching, setSearching] = useState(null)\n\n    useEffect(() => {\n        setQuery('avengers')\n            .then (() => handleSearch())\n    },[])\n\n\n    function handleSearch() {\n        try {\n            setSearching(true)\n            setCharacters(null)\n            setCharacter(null)\n            logic.searchCharacter(query)\n                .then(({results}) => {\n                    setSearching(null)\n                    setFeedback(null)\n                    setCharacters(results.map(({ id, name, thumbnail: {path,extension} }) => ({id, name, path, extension})))\n                })\n                .catch(({ message }) => {\n                    setFeedback(message)\n                    setSearching(null)\n                    setCharacters(null)\n                })\n        } catch ({ message }) {\n            setFeedback(message)\n            setSearching(null)\n            setCharacters(null)\n        }\n    }\n\n    function handleCharacterSelected(id) {\n        try {\n        logic.retrieveCharacter(id)\n            .then(el => setCharacter(el.results[0]))\n            .catch(({ message }) => {\n                setCharacter(null)\n                setFeedback(message)\n            })\n        } catch ({ message }) {\n            setCharacter(null)\n            setFeedback(message)\n        }\n    }\n\n    return <section className=\"margin-top\">\n        <div className=\"columns is-mobile is-centered\">\n            <div className=\"column\"> \n                <form onSubmit={(e) => {e.preventDefault(); handleSearch()}} className=\"field has-addons has-addons-centered\">\n                    <div className=\"control has-icons-left is-expanded\">\n                        <input onChange={e => setQuery(e.target.value)} className=\"input is-small is-rounded\" placeholder=\"Look for your character!\" type=\"text\" name=\"query\"></input>\n                        <span className=\"icon is-small is-left\">\n                            <i className=\"fas fa-bolt\"></i>\n                        </span>\n                    </div>\n                    <div className=\"control\">\n                        <button className=\"button is-small is-rounded is-warning\"type=\"submit\">Search</button>\n                    </div>\n                </form>\n            </div>\n        </div>\n        <SearchResults characters={characters} searching={searching} feedback={feedback} onCharacterSelected={handleCharacterSelected} />\n        <CharacterInfoResult character={character}/>\n    </section>\n\n}"]},"metadata":{},"sourceType":"module"}